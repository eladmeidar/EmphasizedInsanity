<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Emphasized Insanity - Ruby on Rails and the quest for wealth</title>
  <style>
    body { background-color: #fff; color: #333; }

    body, p, ol, ul, td {
      font-family: verdana, arial, helvetica, sans-serif;
      font-size:   13px;
    }

    pre {
      background-color: #eee;
      font-size: 13px;
	  padding:10px;
    }
	
	.entry, #search {
		margin-top:10px;
		background:#eee;
		padding:10px;
	}
	
	#disqus_thread {
	  background-color: #eee;
      font-size: 13px;
	  padding:10px;	
	}
	
	#nakedrailer {
		float:right;
		margin:10px;
	}
	
	h2 { margin:0px; padding:0px ;}
    a { font-weight:bolder; color: #000; }
    a:hover { color: #fff; background-color:#000; }
  </style>
  <link rel="alternate" type="application/rss+xml" title="Emphasized Insanity - Elad Meidar" href="http://feeds.feedburner.com/EladOnRails" />
</head>
<body>
<img id="nakedrailer" src="/images/dddprog.png" alt="The naked Railer" title="The naked Railer"/>
<h1>
  Exception Caught in EladMeidar#life
</h1>
<pre>uninitialized constant Sanity</pre>



<p><code>RAILS_ROOT: <a href="http://blog.eizesus.com">http://blog.eizesus.com</a></code></p>

<div id="traces"> 
    <a href="#" onclick="document.getElementById('Framework-Trace').style.display='none';document.getElementById('Full-Trace').style.display='none';document.getElementById('Application-Trace').style.display='block';; return false;">Application Trace</a> |
    <a href="#" onclick="document.getElementById('Application-Trace').style.display='none';document.getElementById('Full-Trace').style.display='none';document.getElementById('Framework-Trace').style.display='block';; return false;">Framework Trace</a> |
    <a href="#" onclick="document.getElementById('Application-Trace').style.display='none';document.getElementById('Framework-Trace').style.display='none';document.getElementById('Full-Trace').style.display='block';; return false;">Full Trace</a> 
    <div id="Application-Trace" style="display: block;">
		 

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/4/bag-o-links-3-4-2009">Bag O' Links - 3/4/2009</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>03 Apr 2009 | <a href="/2009/4/bag-o-links-3-4-2009#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <ul>
	<li><a href="http://net.tutsplus.com/tutorials/javascript-ajax/build-a-better-tooltip-with-jquery-awesomeness/">Better Tooltip with JQuery</a> &#8211; i like smooth animation.</li>
	<li><a href="http://www.nullislove.com/2009/04/02/starting-good-css-habits-part-1/">Good <span class="caps">CSS</span> habits</a> &#8211; Get used to working right with <span class="caps">CSS</span>, seem to point out importatnt issues.</li>
	<li><a href="http://www.unwrongest.com/projects/airport/">Airport JQuery plugin</a> &#8211; made me laugh, earned a spot.</li>
</ul>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/4/bag-o-links-3-4-2009#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/4/jquery-plugins-hoedown">Bag O' Links - 2/4/2009</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>02 Apr 2009 | <a href="/2009/4/jquery-plugins-hoedown#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <ul>
	<li><a href="http://www.kollermedia.at/archive/2007/11/21/the-ultimate-jquery-plugin-list/">The ultimate JQuery plugin list</a> &#8211; Nice and organized.</li>
	<li><a href="http://blog.evanweaver.com/articles/2007/02/12/table-indexes-in-rails/">Table Indexing in Rails</a> &#8211; How to retain the power of <code>add_index</code> to your application. <strong>a must!</strong>.</li>
	<li><a href="http://www.chadfowler.com/2009/4/1/20-rails-development-no-no-s">Things <span class="caps">NOT</span> to do when you develop on rails</a> &#8211; Chad Fowler&#8217;s twitter friends.. i would add&#8230; work for free :).</li>
	<li><a href="http://auto_html.rors.org/">Auto <span class="caps">HTML</span> plugin</a> &#8211; Cool idea, automatically transforms links (via domain) and includes the destination resource (Vimeo, YouTube movie, Flickr picture) in your document. neat.</li>
	<li><a href="http://www.coffeepowered.net/2009/03/24/announcing-scrap/">Memory Management Middleware for Rails</a> &#8211; I really need to read about Rack.</li>
	<li><a href="http://www.marcofolio.net/webdesign/a_fancy_apple.com-style_search_suggestion.html">Apple.com style search</a> &#8211; Definitely a &#8220;keep&#8221;, i will use that with no doubt.</li>
</ul>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/4/jquery-plugins-hoedown#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/4/bag-o-links-1-4-2009">Bag O' Links - 1/4/2009</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>01 Apr 2009 | <a href="/2009/4/bag-o-links-1-4-2009#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <ul>
	<li><a href="http://feedproxy.google.com/~r/railstips/~3/ZqNoNXdlIZU/crack-the-easiest-way-to-parse-xml-and-json">Crack</a> &#8211; A gem to simplify the process of parsing <span class="caps">XML</span> and <span class="caps">JSON</span>, looks easy as hell. Thanks John.</li>
	<li><a href="http://dreamcss.blogspot.com/2009/03/119-quick-cheat-sheets-for-some-of-most.html">Full Collection of Web 2.0 Cheat Sheets</a> &#8211; Seems pretty up to date too.</li>
	<li><a href="http://www.elctech.com/snippets/moving-items-within-a-ruby-array">Moving items in an array</a> &#8211; I Found it useful when i needed to arrage <span class="caps">HTML</span> <span class="caps">SELECT</span> box options.</li>
</ul>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/4/bag-o-links-1-4-2009#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/4/alkline-17-browsers-on-you-mac">Alkline: 17 Browsers on you mac</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>01 Apr 2009 | <a href="/2009/4/alkline-17-browsers-on-you-mac#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <p>I don&#8217;t think that there is something more annoying, disgusting, blood vessel popping in a web developer life, than browser testing.<br />
Leave a side the already known rants, about IE being hell on desktop, and that nothing is working as you expect on all browsers, there&#8217;s also the issue <strong>of getting all these browsers</strong> to even get the test results.</p>
<p>To test on Safari, you need a Mac access (no, safari for windows is <span class="caps">NOT</span> a browser) and if you are working on a mac, you&#8217;ll need to dual boot windows or install a VM in order to get a convenient access to IE and it&#8217;s minions.</p>
<p>Well no more, <a href="http://litmusapp.com/alkaline/">Alkaline</a> allows you to get a clean sweep access to 17 browsers, directly on your mac.<br />
It sounds great, but the down side is that it&#8217;s not free and have a <strong>subscription licensing</strong> (per month, per day). it might be a cool idea and a nice initiative, but when <a href="http://browsershots.org/">BrowserShots.org</a> is out there, it is much less attractive.</p>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/4/alkline-17-browsers-on-you-mac#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/3/apache-rewrite-rules-explained">Apache Rewrite Rules Explained</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>31 Mar 2009 | <a href="/2009/3/apache-rewrite-rules-explained#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <p>The apache <code>rewrite</code> engine is pretty cool, it allows you handle the user&#8217;s request and preform actions (redirect, block&#8230;) according to a pattern given as parameter.<br />
This main use for rewrites i guess, is to enable pretty <span class="caps">URL</span> outside your app, or to support legacy conventions. (Like i should have done here when i moved to mephisto).</p>
<p><a href="http://www.slideshare.net/bansalakhil/apache-rewrite-rules-presentation?type=powerpoint">Apache Rewite Rules presentation</a></p>
<p>enjoy.</p>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/3/apache-rewrite-rules-explained#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/3/choosing-your-web-development-framework">Choosing your web development framework</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>29 Mar 2009 | <a href="/2009/3/choosing-your-web-development-framework#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <p>In the past couple of years, web frameworks began popping out into our lives like mushrooms, every language with a strong user base released her version of the &#8220;<span class="caps">COOLEST</span> <span class="caps">EVER</span> <span class="caps">WEB</span> <span class="caps">DEVELOPMENT</span>, <span class="caps">MVC</span> <span class="caps">FRAMEWORK</span>&#8221;.</p>
<p><span class="caps">PHP</span> did it with <a href="http://framework.zend.com/">Zend Framework</a> (and <a href="http://www.akelos.org/">akelos</a>), Python unleashed hell with <a href="http://www.djangoproject.com/">Django</a>, Ruby gave birth to Rails and even Microsoft came along the pack with <a href="http://www.asp.net/mvc/"><span class="caps">MVC</span>.net</a>.<br />
The situation today resembles a fan-packed soccer game, each framework has it&#8217;s loyal user base and followers, throwing garbage and firecrackers at the other framework&#8217;s followers and everyone thinks they use the best framework there is and ditch all other frameworks.</p>
<p>you know what? they are <strong>all</strong> right.</p>
<h2>all!? right? how?</h2>
<p>It&#8217;s simple, each one of these frameworks and the language behind it, are good, mature and well founded. <br />
All of the major frameworks are constantly held under development by a group of rapid, devoted teams and they are getting better and better by the day.<br />
There is nothing Django can do that Rails can&#8217;t, there is nothing .<span class="caps">NET</span> can do that ZF can&#8217;t. <strong>all the frameworks offer more or less the same</strong>, it&#8217;s just a matter of preference and how you prefer to work and develop your application.</p>
<h2>Choosing a Framework &#8211; points of authority</h2>
<p>Choosing a framework is not a thing you can decide based on a brief overlook on each one, not even by reading 1000 articles and tutorials online.<br />
You have to feel it, work on it hands on to see how you and you inner programmer mind, connect with that language.</p>
<blackquote>
<p>I don&#8217;t see myself moving to Rails from <span class="caps">PHP</span>, there are more people working with <span class="caps">PHP</span> these days and it&#8217;s easier for me to find developers when i need to hire &#8211; <cite>An Israeli startup <span class="caps">CEO</span> in a breakfast chat with me</cite></p>
</blackquote>
<p>If you will ask a Rails developer if he would go <span class="caps">PHP</span> again, most probably you&#8217;ll get something thrown at you at the speed of light, that&#8217;s how it is, every one has it&#8217;s own preference, and old habits die hard.</p>
<p>If you do decide on changing your current development framework/language and move on you&#8217;ll need to pay attention to a couple of elements in the framework inner and outer aspects in order to get to your right decision:</p>
<h4>#1 &#8211; Ease of development and deployment</h4>
<p>Most of the frameworks relay on the <span class="caps">MVC</span> concept, so developing on neither should not be complicated, what you should pay attention to is how easy it is to collaborate between several developers (server side, client side) and how easy is the deployment process. <br />
Some think that <code>ftp</code> is a great way to deploy their <span class="caps">PHP</span> applications, but the Rails guys will probably say one word: &#8220;Capistrano&#8221;.<br />
You need to see which of the processes fits you the most, so yes you can <a href="http://www.simplisticcomplexity.com/2006/08/16/automated-php-deployment-with-capistrano/">deploy <span class="caps">PHP</span> applications with capistrano</a>, but if you are already installing ruby for capistrano, what&#8217;s the idea?<br />
Database configuration, framework dependencies, plugins and extensions. <br />
These are all things you have to take into consideration, do you prefer managing <span class="caps">XML</span> files for database configurations? or <code>database.yml</code> and the <code>mysql gem</code> suits you better?<br />
You prefer easy and convention over configuration mentality? or &#8220;have all the power to do what you want with <span class="caps">XML</span>&#8221; ?</p>
<h4>#2 &#8211; Platforms</h4>
<p>Every framework i heard about, except .<span class="caps">NET</span>, runs on every platform, so if you really love .<span class="caps">NET</span> you should take in mind that you&#8217;ll have to deploy windows servers to host your applications, and windows servers cost more.<br />
It&#8217;s not only the servers we talk about, it&#8217;s even the development machines. From what i know, windows based development on rails has some issues for example.</p>
<h4>#3 &#8211; Database Support</h4>
<p>Choosing your database is a whole different subject, and you should get to this point where you choose your framework <strong>after</strong> you already chosen your database. Most frameworks supports a wide variety of databases and <abbr title="Object-relational mapping"><span class="caps">ORM</span></abbr> engines but some have issues with specific kinds of database adapters (Rails and Oracle don&#8217;t get along <strong>too well</strong>, but it works).<br />
Your database is one of the core elements of any application, cache or not, a well implemented database and a transparent ninja connection with your framework can do wonders to your application, so make sure they match.</p>
<h4>#4 &#8211; I18n</h4>
<p><abbr title="Internationalization and localization">i18n</abbr> may not be required in any application, but you are building a web application, and the web is international whether you like it or not, and there might be a chance for some Chinese or Israeli user entering Chinese or Hebrew values in your application, so make sure your application supports Unicode (string manipulation for example) and if it&#8217;s possible that it has some translation options and global time zones management.</p>
<h4>#5 &#8211; A Future</h4>
<p>The most important attribute that your framework should posses, is it&#8217;s community. so many computer languages and frameworks started as a big bang and went down the drain a couple of years after. You <strong>don&#8217;t</strong> want to choose a different framework and language every year so check out the community around the framework: blogs, extensions, <span class="caps">IRC</span> channels, Google Groups, Forums, version releases.. these are all signs of a live, functioning and an under development framework.</p>
<h4>#6 &#8211; Testing</h4>
<p><strong><span class="caps">TESTING</span> IS <span class="caps">IMPORTANT</span></strong> &#8211; remember that, you may have the greatest developer team ever, they still need to be tested (by themselves or by a QA, doesn&#8217;t matter). Your framework must have a testing mechanism or tools (or both) to make this process clear, simple and productive. A strong testing base, is a base for a better application</p>
<h4>#7 &#8211;  Standard Based</h4>
<p>You are building a web application, and the web has standards: communication standards (<a href="http://en.wikipedia.org/wiki/Representational_State_Transfer#RESTful_example:_the_World_Wide_Web"><span class="caps">REST</span></a>), output standards (<span class="caps">HTML</span> document standards) and more. remember that your are in an industry, and an industry has it&#8217;s rules and standards to follow, which in this case makes it&#8217;s easier to develop a clean, simple, flowing application.</p>
<h4>#8 &#8211; Documentation</h4>
<p>Need to say more?<br />
If you are going to start learning a new language, the first thing you&#8217;ll bump in is the documentation, read it carefully and pay attention to how elaborated it is, if you can understand it on the first shot, it says something about the framework.</p>
<h4>#9 &#8211; Technical Features</h4>
<p>What is the main reason you want to use a framework? to save time. The framework is supposed to supply you with some basic needs in order to make it useful, i can think of several things that you should keep in mind</p>
<ul>
	<li>development dispatcher &#8211; some kind of an easy to use application server to use in development environment.</li>
	<li>In house validations &#8211; client side and server side</li>
	<li>Different kinds of view supports &#8211; <span class="caps">PDF</span>, xml, <span class="caps">RSS</span>, <span class="caps">JSON</span>&#8230;</li>
	<li><abbr title="Don't Repeat Yourself"><span class="caps">DRY</span></abbr> coding tools &#8211; templates, partials, shared resources.</li>
</ul>
<h2>Final Thoughts</h2>
<p>Choose a web development frameworks based on your needs, think for the future, not what&#8217;s &#8220;cool&#8221; right now and get swept by hypes.</p>
<p>Another important thing is to know what is the best tool for a specific task, you are choosing a web framework, a language structure to dispatch web requests, process them, and spit out an <span class="caps">HTML</span>/<span class="caps">XML</span>/whatever in response, it is not meant to handle Audio mixing for example (i&#8217;d use C for a task like that).<br />
Keep that in mind to test these web frameworks on what they are designed for, not for what they aren&#8217;t.</p>

  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/3/choosing-your-web-development-framework#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/3/3500-in-5-hours-with-ruby-on-rails">3500$ in 5 hours with Ruby on Rails</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>29 Mar 2009 | <a href="/2009/3/3500-in-5-hours-with-ruby-on-rails#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <p>We (and I personally) don&#8217;t like working with clients, I have done that for too long to know that&#8217;s not what i like, i prefer developing in-house SaaS applications and work according to my timeframe and needs.<br />
This morning i got a call from a friend that asked me to help some other friend of his, that got ditched by some <span class="caps">PHP</span> developer and left him with no application that needs for <span class="caps">TOMORROW</span>. He asked me if there is anyway i can help this guy (being a <span class="caps">CEO</span> with a development team behind me) and save him, and if i do, he will pay accordingly.</p>
<p>Well, why not?</p>
<p>It&#8217;s easy actually, Rails is a <strong>rapid development framework</strong> by definition, and being rapid is exactly what you need when a friend calls and tells you he needs a coupon management web application <strong>for tomorrow!</strong>.<br />
The basic coupon management design is simple:</p>
<ul>
	<li><span class="caps">CRUD</span></li>
	<li>Expiry date</li>
	<li>Recipient</li>
	<li>Discount (either fixed amount or percentage)</li>
</ul>
<p>So i popped out my laptop while my girlfriend was driving to the florida keys for a fun-day we planned, and began to code.</p>
<p>After 1 <code>scaffold</code> (coupon), 2 plugins (authlogic, uuid), some view and <span class="caps">CSS</span> work (yeah, on <code>scaffold.css</code>) and 3 hours, i finished the basic application and it was up and running on my development server.</p>
<blackquote>
<p>&#8220;Wow, elad&#8230; this is <span class="caps">NICE</span>!, i should have asked you before! that <span class="caps">PHP</span> guy that ran off on us had it under development for A <span class="caps">MONTH</span>!, where do i sent your payment?&#8221; <cite> &#8211; surprise client</code></p>
</blackquote>
<p>Wait&#8230; What? you think i&#8217;m done? that&#8217;s the scaffold <span class="caps">CSS</span> for god sake!!!</p>
<p>Well you know what they say, &#8220;The costumer is always right&#8221; &#8211; so i gave him my account and earned a breeze 3500$ for doing 1 scaffold and 2 <code>script/plugin install</code> calls.</p>
<h4>Important things to understand from this case</h4>
<ul>
	<li>Rails is fast, easy and simple to develop with.</li>
	<li>The community holds a huge list of solutions (plugins, gems, tutorials) to get you in the way you want <span class="caps">ASAP</span>.</li>
	<li>I got that project delivered in <strong>about 4 and half hours</strong>, and got a huge amount of money for that. Yeah, your clients will not always like the basic scaffold <span class="caps">CSS</span> design and may require some more complicated features than what i was required to do, but still, i could have made this system much more complicated too in not too much extra effort.</li>
	<li>Some people do like the basic scaffold <span class="caps">CSS</span> when it&#8217;s not a public web site, but a back end implementation.</li>
	<li>There&#8217;s nothing better to your business if your clients are happy, and get to be like that fast.</li>
</ul>
<li>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/3/3500-in-5-hours-with-ruby-on-rails#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/3/harnessing-css-online-css-orgenizer">Harnessing CSS: online CSS orgenizer</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>27 Mar 2009 | <a href="/2009/3/harnessing-css-online-css-orgenizer#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <p>What? you don&#8217;t keep your <span class="caps">CSS</span> arranged and clean? you deserve a place in hell.</p>
<p>Now seriously, in <span class="caps">CSS</span> files as we all know, there is not importance to <strong>inner attribute order</strong> but only to the order of the selectors you specify, the latest selector that matches, will run down previous attributes if the same attributes were specified in several selectors.</p>
<p><a href="http://styleneat.com/">Styleneat</a> let&#8217;s you organize your <span class="caps">CSS</span> files in an alphabetical attributes order (and selectors too, but <strong>just don&#8217;t, please</strong>).</p>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/3/harnessing-css-online-css-orgenizer#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/3/ruby-on-rails-and-oracle-new-version-for-oracle_enchanced_adapter">Ruby On Rails and Oracle: New version for oracle_enchanced_adapter</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>25 Mar 2009 | <a href="/2009/3/ruby-on-rails-and-oracle-new-version-for-oracle_enchanced_adapter#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <p>A new version for the <a href="http://blog.rayapps.com/2009/03/23/activerecord-oracle-enhanced-adapter-also-on-jruby-and-ruby-19/">oracle_enhanced_adapter is now out</a>, which is exciting for those of use who chose to work with Oracle.<br />
Use can use the Oracle enhanced adapter:</p>
<ul>
	<li>on <span class="caps">MRI</span> 1.8.6 with ruby-oci8 1.0.x library or gem</li>
	<li>on JRuby (so far tested with 1.1.6) with <span class="caps">JDBC</span> Oracle driver</li>
	<li>on Ruby/<span class="caps">YARV</span> 1.9.1 with ruby-oci8 2.0 library or gem</li>
</ul>
<p>And, which is the coolest, <strong>Oracle enhanced adapter passes 100% ActiveRecord unit tests!</strong></p>
<p>install the new adapter by:<br />
<pre class="brush: bash"><br />
$ sudo gem install activerecord-oracle_enahnced-adapter<br />
</pre></p>
<p><strong>note that some of the <span class="caps">SQL</span> compatible with Mysql and is used by rails, is not compatible with Oracle</strong>, so run your tests again.</p>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/3/ruby-on-rails-and-oracle-new-version-for-oracle_enchanced_adapter#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

  <div class="entry">
  	<div class="entrytitle">
  		<h2><a href="/2009/3/deploying-ruby-on-rails-on-ec2-using-rubber">Deploying Ruby on Rails on EC2 - Using Rubber</a> <span class="author"> by Elad Meidar</span></h2> 
  		<h3>25 Mar 2009 | <a href="/2009/3/deploying-ruby-on-rails-on-ec2-using-rubber#disqus_thread" class="commentslink">View comments</a></h3>
  	</div>
  	
  	<div class="entrybody">
  	  <p>A while ago i wrote a post tutoring a <a href="http://blog.eizesus.com/2009/1/rails-and-amazon-ec2-beginners-guide">deployment of a simple rails application on ec2</a> using the EC2onRails gem,<br />
in this post i will explain how to use another plugin, called <strong>rubber</strong> that simplifies the deployment of more complex applications, those with multiple instances for example.</p>
<h4>Setting the other stuff we need</h4>
<p>Follow this section on <a href="http://blog.eizesus.com/2009/1/rails-and-amazon-ec2-beginners-guide#ec2_keypair">my previous Rails on EC2 post</a> to get your EC2 account <span class="caps">SSH</span> keypair first, <br />
Then, install he <code>amazon-ec2</code> gem:<br />
<pre class="brush: bash"><br />
$ sudo gem install amazon-ec2<br />
</pre><br />
the <code>AWS::S3</code> gem:<br />
<pre class="brush: bash"><br />
$ sudo gem install aws-s3<br />
</pre><br />
Our beloved <code>Capistrano</code>:<br />
<pre class="brush: bash"><br />
$ sudo gem install capistrano<br />
</pre><br />
and the <code>nettica</code> gem:<br />
<pre class="brush: bash"><br />
$ sudo gem install nettica<br />
</pre><br />
note that you only need to install the <code>nettica</code> gem if you need to automatically map specific instances to <a href="http://en.wikipedia.org/wiki/List_of_DNS_record_types">A Records</a>.</p>
<h4>Setup Your Application</h4>
<p>in your application root, install the <code>rubber</code> plugin:<br />
<pre class="brush: bash"><br />
$ script/plugin install git://github.com/wr0ngway/rubber.git<br />
</pre></p>
<h5>Generating Configuration</h5>
<p>and than the crazy part, you&#8217;ll have to generate a <code>rubber</code> deployment setup that matches your application needs. To do that you&#8217;ll have to choose on your own.<br />
Each one of these &#8220;configurations&#8221; contains one or more service that is needed for your application, such as Apache, Mysql, Sphinx and more, and some act as bundles that basically install a group<br />
of other services:</p>
<ul>
	<li>apache: Installs apache</li>
	<li>base: configuration needed by all other packages/services <strong>you must install this one anyway</strong>.</li>
	<li>complete_mysql:
	<ul>
		<li>minimal_mysql</li>
		<li>monit</li>
		<li>munin</li>
		<li>memcached</li>
	</ul></li>
	<li>complete_passenger_mysql:
	<ul>
		<li>base</li>
		<li>mysql</li>
		<li>apache</li>
		<li>passenger</li>
		<li>munin</li>
		<li>memcached</li>
	</ul></li>
	<li>cruise: the cruise-control (CI server).</li>
	<li>haproxy: the haproxy module.</li>
	<li>memcached: the memcached module</li>
	<li>minimal_mysql:
	<ul>
		<li>base</li>
		<li>mysql</li>
		<li>mongrel</li>
		<li>nginx</li>
		<li>haprox</li>
	</ul></li>
	<li>minimal_nodb:
	<ul>
		<li>base</li>
		<li>mongrel</li>
		<li>nginx</li>
		<li>haproxy</li>
	</ul></li>
	<li>mongrel: the mongrel cluster application server</li>
	<li>monit</li>
	<li>munin</li>
	<li>mysql</li>
	<li>mysql_cluster</li>
	<li>mysql_proxy</li>
	<li>nginx</li>
	<li>passenger</li>
	<li>sphinx</li>
</ul>
<p>The one that we will use is the one that was the most suitable for my application, the <code>complete_passenger_mysql</code>, so in your project root type:<br />
<pre class="brush: bash"><br />
$ script/generate vulcanize complete_passenger_mysql<br />
</pre></p>
<h5>Configuration Files</h5>
<p>now edit your <code>config/rubber/rubber.yml</code> and add your <code>access_key, secret_access_key, aws_account, ec2_key_name</code> and <code>ec2_key_file</code> (you can get all of those by following my <a href="http://blog.eizesus.com/2009/1/rails-and-amazon-ec2-beginners-guide#setup_account">previous post</a>).<br />
each service/bundle installs with  a set  configuration files, a <code>rubber-module.yml</code> file for configuring each module will be found in your <code>config/rubber</code> folder, a long side a <code>deploy-module.rb</code> file for deployment specific behavior.</p>
<p>As you can see, the configuration files are basically <span class="caps">ERB</span> templates.<br />
Some special variables are defined to handle and control the module:</p>
<table>
	<tr>
		<th>Variable</th>
		<th>Description</th>
	</tr>
	<tr>
		<td>@*path*</td>
		<td>The output path to write the transformed config file to</td>
	</tr>
	<tr>
		<td>@*read_cmd*</td>
		<td>The command to use for reading the original config file from, e.g. “crontab -l”</td>
	</tr>
	<tr>
		<td>@*write_cmd*</td>
		<td>The command to use for piping the transformed config file to, e.g. “crontab -”</td>
	</tr>
	<tr>
		<td>@post 	The</td>
		<td>command to run after generating the config file <span class="caps">ONLY</span> if it has changed</td>
	</tr>
	<tr>
		<td>@owner</td>
		<td>The owner the output file should have, e.g. “root”</td>
	</tr>
	<tr>
		<td>@group</td>
		<td>The group the output file should have, e.g. “system”</td>
	</tr>
	<tr>
		<td>@perms</td>
		<td>The permissions the output file should have, e.g. 0644</td>
	</tr>
	<tr>
		<td>@additive</td>
		<td>Sets transformation to be additive, only replaces between given delimiters, e.g. @additive = [“## start”, “## end”]</td>
	</tr>
</table>
<p>The variables set in <strong>bold</strong> are those you <strong>must</strong> supply.<br />
In addition, within the configuration files you can access to the rubber configuration objects <code>rubber_env</code> (rubber*.yml) and <code>rubber_instances</code> (instance*.yml).</p>
<p>to test your configuration run:<br />
<pre class="brush: bash"><br />
$ rake rubber:config<br />
</pre><br />
this will apply your configuration to your <code>development</code> environment, so you can check that everything is up and running.<br />
note that:</p>
<ol>
	<li>Configuration files that exist in config/rubber/common will be transformed for all hosts.</li>
	<li>Configuration files that exist in config/rubber/role/ will only be transformed on the hosts that are members of role_name.</li>
	<li>Configuration files that exist in config/rubber/host/ will only be transformed on the hosts with a hostname of host_name.</li>
</ol>
<p>and will override based on that order in favor of the most specific configuration and alphabet order of configuration files.</p>
<h4>Bootstrap and Deploy</h4>
<p>first, you&#8217;ll need to create your environment bootstrap, in this case, it&#8217;s production <code>production</code>:<br />
<pre class="brush: bash"><br />
$ <span class="caps">ALIAS</span>=production <span class="caps">ROLES</span>=web,haproxy,app,mysql_master,passenger cap rubber:create	<br />
</pre><br />
Note that this is a simple deployment, to use a little bit more complex deployment use something like:<br />
<pre class="brush: bash"><br />
$ <span class="caps">ALIAS</span>=web01 <span class="caps">ROLES</span>=web,haproxy, passenger cap rubber:create<br />
$ <span class="caps">ALIAS</span>=app01 <span class="caps">ROLES</span>=app cap rubber:create<br />
$ <span class="caps">ALIAS</span>=app02 <span class="caps">ROLES</span>=app cap rubber:create<br />
$ <span class="caps">ALIAS</span>=db01 <span class="caps">ROLES</span>=mysql_master cap rubber:create<br />
$ <span class="caps">ALIAS</span>=db02 <span class="caps">ROLES</span>=mysql_slave cap rubber:create	<br />
</pre><br />
after you finished setting up your Rubber configuration, it&#8217;s time to create the bootstrap:<br />
<pre class="brush: bash"><br />
$ cap rubber:bootstrap	<br />
</pre><br />
and then just the regular capistrano deployment fire starters:<br />
<pre class="brush: bash"><br />
$ cap deploy:check<br />
$ cap deploy:setup<br />
$ cap deploy:cold<br />
</pre></p>
<p>and that&#8217;s about it.</p>
<h4>A Final Note</h4>
<p>The process of configuring an instance, bootstarping, and delpoying will run on <strong>all the instances your have specified, old and new!</strong>, so you shoudl <strong>always</strong> check your configuration on a local/staging environment.</p>
  	</div>
  	
  	<div class="entrymeta">
  	  <a href="/2009/3/deploying-ruby-on-rails-on-ec2-using-rubber#disqus_thread" class="commentslink">View comments</a>
  	</div>
  </div>

 
<div class="archive_link">
  <a href="/archive.html">View all previous posts in archive &raquo;</a>
</div>
    </div>
    <div id="Framework-Trace" style="display: none;">
		<div class="entry">
		<p>
			My name is <a href="http://www.eizesus.com">Elad Meidar</a>, i'm an Israeli entrepreneur and a web developer currently based in Florida, USA.<br/>
  			I am currently running a vivid Rails and mobile applications development firm in Fort Lauderdale, Consulting Venture Capitals in the US and totally crazy about Ruby on Rails.<br/>
		</p>
		<ul>
			<li><a href="http://www.twitter.com/eladmeidar">Twitter</a></li>
			<li><a href="http://www.facebook.com/profile.php?id=629277362">Facebook</a></li>
			<li><a href="http://www.linkedin.com/in/eladmeidar">LinkedIn</a></li>
			<li><a href="http://www.workingwithrails.com/person/5844-elad-meidar">Working With Rails</a></li>
			<li><a href="http://www.railsmentors.org/users/185">Rails Mentors</a></li>
			<li><a href="http://github.com/eladmeidar">GitHub</a></li>
			<li>#rubyonrails, #railsbridge, #facebook and #jquery on irc.freenode.net as <strong>eladmeidar</strong></li>
		</ul>
		<p>
		<a href="http://contributors.rubyonrails.org/contributors/elad-meidar/commits"><img src="http://www.workingwithrails.com/images/rails-core-contributor.gif?1213632569" alt="Rails Core Contributor" title="Rails Core Contributor"/></a>
		</p>
		<p>
			<a href="http://www.railsbridge.org" title="An inclusive and friendly Ruby on Rails community.">
			<img src="http://www.railsbridge.org/images/railsbridge_badge.png" alt="RailsBridge Badge" /></a>
		</p>
		</div>
    </div>
  
    <div id="Full-Trace" style="display: none;">
		<div id="twitter_div" class="entry">
			<ul id="twitter_update_list"></ul>
			<a href="http://twitter.com/eladmeidar">Follow me on Twitter!</a>
		</div>
    </div>
</div>

<h2 style="margin-top: 30px">Request</h2>
<p><strong>Parameters</strong>:
	<form id="search" method="get" action="http://www.google.com/search?sitename=blog.eizesus.com">
	<input type="text" size="25" name="q" value="" maxlength="255"/><input type="submit" value="Search"/>

	<input type="hidden" name="sitesearch" value="blog.eizesus.com" checked=""/>
	
	</form></p>
</div>


<h2 style="margin-top: 30px">Response</h2>
<p><b>Headers</b>:
<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/emphasizedinsanity/embed.js"></script><noscript><a href="http://emphasizedinsanity.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</p>

<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/eladmeidar.json?callback=twitterCallback2&amp;count=10"></script>
<p>
	<a href="http://feeds2.feedburner.com/EladOnRails"><img src="http://feeds2.feedburner.com/~fc/EladOnRails?bg=FFFFFF&amp;fg=444444&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a>
	<script type="text/javascript" language="javascript" src="http://twittercounter.com/embed/?username=eladmeidar&style=white"></script>
</p>
<p>
	<script type="text/javascript" src="http://s51.sitemeter.com/js/counter.js?site=s51eizesusrulez"></script>
	<noscript>
		<a href="http://s51.sitemeter.com/stats.asp?site=s51eizesusrulez" target="_top">
		<img src="http://s51.sitemeter.com/meter.asp?site=s51eizesusrulez" alt="Site Meter" border="0"/></a>
	</noscript>
</p>
</body>
</html>