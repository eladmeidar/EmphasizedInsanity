<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html style="-moz-binding: url(&quot;chrome://glass/content/xbl/stack.xml#stack&quot;);" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <title>Emphasized Insanity - Ruby on Rails and Oracle on Mac Os Leopard</title>
		<link href="/stylesheets/bundle_github.css" media="screen" rel="stylesheet" type="text/css">
    <link href="/stylesheets/bundle_common.css" media="screen" rel="stylesheet" type="text/css">
    <script type="text/javascript" charset="utf-8">
      var GitHub = {}
      var github_user = 'eladmeidar'
      
    </script>
    <script src="/javascripts/jquery.js" type="text/javascript"></script>
    <script src="/javascripts/bundle_common.js" type="text/javascript"></script>
		<script src="/javascripts/bundle_github.js" type="text/javascript"></script>
		<link href="http://blog.eizesus.com/feed/atom.xml" rel="alternate" title="Emphasized Insanity" type="application/atom+xml">

    <meta name="description" content="Ruby on Rails developer blog">
  </head>
<body>
 
    <div class="subnavd" id="main">
      <div id="header" class="pageheaded">
        <div class="site">
          <div class="logo">
            <a href="/"><h1>Emphasized Insanity</h1></a>
          </div>          
			     <div class="userbox">
				     <div class="inner">
				       <div class="avatarname">
				         <a href="http://github.com/eladmeidar"><img alt="" src="/images/eladmeidar.jpg" height="20" width="20"></a>
				         <a href="http://twitter.com/eladmeidar" class="name">@eladmeidar</a>          
				       </div>
				       <ul class="usernav">
								 <li><a href="/about.html">About me</a></li>
				         <li><a href="http://www.linkedin.com/in/eladmeidar">LinkedIn</a></li>
				         <li><a href="http://workingwithrails.com/person/5844-elad-meidar">WWR</a></li>
				         <li><a href="http://github.com/eladmeidar">GitHub</a></li>
								 <li><a href="http://www.nautilus6.com">My Company</a></li>
				       </ul>
				     </div>
				   </div><!-- /.userbox -->
					 <div class="topsearch">
  
				    <form action="http://www.google.com/search?sitename=blog.eizesus.com" id="top_search_form" method="get">
				      <input autocomplete="off" class="search my_repos_autocompleter notnative placeholder ac_input" name="q" results="5" placeholder="Searchâ€¦" type="search"> <input value="Search" class="button" type="submit">
								<input type="hidden" name="sitesearch" value="blog.eizesus.com" checked=""/>
				    </form>
  
  						<ul class="nav">
					      <li><a href="/archive.html">Explore Emphasized Insanity</a></li>
					    </ul>
  
						</div>

        </div>
      </div>        
    <div class="site">
      <div class="pagehead repohead vis-public">
        <h1> <a href="/">Emphasized Insanity</a> / <strong><a href="/">Blog</a></strong> </h1>
				<ul class="actions">
	        <li> <a href="http://blog.eizesus.com/feed/atom.xml" class="minibutton btn-watch " id="watch_button" style=""><span><span class="icon"></span>Subscribe</span></a></li>        
	        <li class="for-notforked" style=""><a href="#disqus-comments" class="minibutton btn-fork " id="fork_button"><span><span class="icon"></span>Comment</span></a></li>
    	  </ul>
				<ul class="tabs">
  				<li><a href="/" class="selected" highlight="repo_source">Source</a></li>
					<li><a href="/archive.html" highlight="repo_commits">Archive</a></li>
					<li><a href="http://www.railsbridge.org" highlight="issues">RailsBridge</a></li>
  				<li class="contextswitch nochoices">
				    <span class="toggle leftwards">
				      <em>Branch:</em>
				      <code>master</code>
				    </span>
				  </li>
				</ul>

<div class="subnav-bar">  
  <ul>
    <li>
      <a href="#" class="dropdown">Switch Branches (1)</a>
      <ul>
				<li><strong>master âœ“</strong></li>
      </ul>
    </li>
  </ul>
</div> 
    <div id="repo_details" class="metabox clearfix  pledgified">
      <div id="repo_details_loader" class="metabox-loader" style="display: none;">Sending Requestâ€¦</div>
        <a href="#pledgie_box" rel="facebox" title="Brought to you by pledgie.com" class="pledgie pledgie-button for-owner tooltipped" id="activate_pledgie_button" style="display: none;"><span>Enable Donations</span></a>
      		<div id="pledgie_box" style="display: none;">
        		<h2>Pledgie Donations</h2>
          </div>

      		<div id="repository_description" rel="repository_description_edit">
						<p>
							This is the personal homepage of Elad Meidar, a web developer and an entrepreneur specializing in Ruby on Rails. I am a proud member of <a href="http://www.railsbridge.org">RailsBridge</a>, Helping new <a href="http://www.railsmentors.org/users/185">Rails developers</a> get into our world and also contributed a few <a href="http://contributors.rubyonrails.org/contributors/elad-meidar/commits">Patches</a> to the Ruby on Rails core.
						</p>
						<p>
							I hang around Fort Lauderdale, FL and Tel-Aviv in Israel, and i am currently running <a href="http://www.nautilus6.com">Nautilus6</a> so Feel free to contact me regarding projects :).
						</p>
      		</div>
    		</div>
    </div><!-- /.pagehead -->
  <div id="commit">
    <div class="group">        
  		<div class="envelope commit">
    		<div class="human">
        <div class="message"><pre>Recent Posts</pre></div>
      

      <div class="actor">
        <div class="gravatar">
          <img alt="" src="images/eladmeidar.jpg" height="30" width="30">
        </div>
        <div class="name"><a href="/">Elad Meidar</a>
	 				<span>(author)</span>
				</div>
        <div class="date">
          <abbr class="relatize relatized" title="1984-06-19 06:06:07">about 25 years ago</abbr>
        </div>
      </div>
    </div>
    <div class="machine">
      <span>c</span>ommit&nbsp;&nbsp;<a href="#" hotkey="c">60fa264c54341711baef087347105a5b9dd68863</a><br>
      <span>t</span>ree&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" hotkey="t">508268ee6774e5c6060585718705f1ec7afa80d8</a><br>
        <span>p</span>arent&nbsp; <a href="#" hotkey="p">179f7c0440e6073779efc40366c6ced3a9888f71</a>    
    </div>
  </div>

    </div>
  </div>  
    <div id="path">
      <b><a href="/2008/11/ruby-on-rails-and-oracle-on-mac-os-leopard-2">Ruby on Rails and Oracle on Mac Os Leopard</a></b> / 
    </div>
		<div id="browser">
  		<table cellpadding="0" cellspacing="0">
    	<tbody><tr>
      <th></th>
      <th width="400p">name</th>
      <th>age</th>
      <th>
          history
      </th>
    </tr>
		<tr class="alt">
		  <td class="icon"> <img alt="file" src="/images/txt.png"> </td>
		  <td class="content">
				<a href="/2008/11/ruby-on-rails-and-oracle-on-mac-os-leopard-2" id="d8f8d46921aa81abc4c0d27703a8908333ae38c3">Ruby on Rails and Oracle on Mac Os Leopard</a>
			</td>
		  <td class="age">
				<span class="relatize relatized">06/11/2008</span> 
			</td>
		  <td class="message"> 
				<a href="/2008/11/ruby-on-rails-and-oracle-on-mac-os-leopard-2" class="message" title="another post">Another post</a> [Elad Meidar] 
			</td>
		</tr>
  </tbody></table>
</div>
  <div id="readme" class="announce"><span class="name"></span>
		<div class="wikistyle">
				<h3>Overview</h3><p><br />The nightmare is over.<br />Just until the latest Oracle libraries update (finally released a X86 library pack for mac) it was nesecerry to use 2 versions of ruby, a universal and a ppc version. Sadly, when running <span class="caps">PPC</span>, the benchmarking were terrible and it had some very annoying freezes and other stuff that would simple make you want to jump off the roof.<br /><span class="caps">BUT</span>! (:) ) times had changed, Oracle (as mentioned) released an X86 Intel compatible library pack for MacOs users and therefore ended my misery, <br />Woohoo! That makes the entire process of connection Ruby on Rails and oracle on Leopard about as 100 times less complicated than before, so I’ve posted it here to let everyone enjoy. <br />I assumes that you’re using Rails 2.0 or greater (Why not really?). <br /><br /><strong><span class="caps">IMPORTART</span>!!!</strong><br /><em><br />If you already connected Oracle and Ruby on Rails using the old way, please preform the &#8220;Cleanup&#8221; step first.<br /></em><br /><br /><h3>Oracle Libraries</h3><br />The new Intel Mac versions are available from the <a href="http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/intel_macsoft.html">Oracle downloads site</a>. Install them in /Library/Oracle/. <br />You can do side-by-side installations in folders with whatever names you want, since apps find them by using the $ORACLE_HOME environment variable (and it’s friends). I’ve got mine in /Library/Oracle/instantclient_10_2. <br />Also make sure that you’ve got the files required to run <span style="font-weight:bold;">sqlplus</span> and the <span style="font-weight:bold;">sdk</span> along with the <span style="font-weight:bold;">basic</span>. You can drop those in the same directory.<br /><br /><h4>Symlink the libraries</h4><br /><br />In the directory where you’ve installed the instant client, run this:<br /><br /><pre><br />ln -s libclntsh.dylib.10.1 libclntsh.dylib<br /></pre><br /><br />Set the environment variables correctly<br /><br />You’ll probably want to put these lines in your /etc/profile , but they also must be run from the command line to take effect (you can also &#8220;source /etc/profile&#8221;):<br /><br /><pre><br />export ORACLE_HOME=/Library/Oracle/instantclient_10_2 &lt;= Change to your library!<br />export TNS_ADMIN=$ORACLE_HOME<br />export LD_LIBRARY_PATH=$ORACLE_HOME<br />export DYLD_LIBRARY_PATH=$ORACLE_HOME<br />export <span class="caps">PATH</span>=$<span class="caps">PATH</span>:$ORACLE_HOME<br /></pre><br /><br /><br /><h3>Oracle! giddie up!</h3><br /><br />First you&#8217;ll need to install the Active Record Oracle adapter,<br /><br /><pre><br />sudo gem install activerecord-oracle-adapter &#8212;source http://gems.rubyonrails.org<br /></pre><br /><br />which is how ActiveRecord deals with Oracle. <br />It doesn’t, however, install the <span style="font-weight:bold;">Ruby oci8 driver</span>, which is how Ruby talks to Oracle (yeah, annoying). <br /><br /><strong>Important!!!</strong><br /><em><br />Have you installed the Oracle Instant Client <span class="caps">SDK</span> ?<br />good.<br /></em><br /><br />Get the lastest the oci8 library. <a href="http://rubyforge.org/frs/download.php/41042/ruby-oci8-1.0.3.tar.gz">Download</a> it and unpack the file in the finder: it should unzip into ~/Downloads/ruby-oci8-x.&#215;.&#215;.<br /><br />Now we can finish configuring the environment before we compile the library.<br /><br /><pre><br />cd ~/Downloads/ruby-oci8-x.&#215;.x<br />export <span class="caps">SQLPATH</span>=$ORACLE_HOME<br />export RC_ARCHS=i386<br />ruby setup.rb config<br />make<br />sudo make install<br /></pre><br /><br />oh joy, scrolling lines of doom will pass in front of you and hopefully you&#8217;ll see no errors and burst into tears.<br /><br /><h3>Show me!</h3><br /><br />At this point, we’re almost done. Let&#8217;s see it working.<br /><br /><pre><br />irb<br />require &#8216;oci8&#8217;<br />> true<br /></pre><br />or<br /><pre><br />irb<br />require 'rubygems'<br />&gt; []<br />require &#8216;oci8&#8217;<br />> true<br /></pre><br /><br /><br /><h3>Configure your database.yml</h3><br />In your database.yml, use the following to make it work:<br /><pre><br />development:<br />adapter: oracle<br />database: your_instance_name<br />username: your_user_name<br />password: your_password<br /></pre><br /><br />The database name = > comes straight out of your tnsnames.ora file. You don’t need to specify any other connection information in database.yml, since the tnsnames.ora file has everything you need.<br /><br />if you are using the oracle Express edition, it should look something like that.<br /><pre><br />development:<br />  adapter: oci<br />  host: //db_hostname:db_port/xe < Oracle port is usually 1521<br />  username: username<br />  password: password<br />  cursor_sharing: similar<br />  prefetch_rows: 100<br /></pre><br /><br />note: last 2 lines are some tweaking for a better Oracle performance.<br /><br /><br /><br /><h3>Cleanup: Fix the ruby_fat and ruby_ppc setup</h3><br /><br />if you have installed Oracle libraries using the old way, you&#8217;ll be happy to remove the mess it made out of your ruby installation and happily, it’s quite simple. <br />Just remove the ruby_ppc files, and the symlinks to them (called ruby, and rename ruby_fat as ruby:<br /><br /><pre><br />cd /usr/bin &lt;== or wherever you put them.<br />sudo rm ruby<br />sudo rm ruby_ppc<br />sudo mv ruby_fat ruby<br /></pre><br />and<br /><pre><br />cd /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin<br />sudo rm ruby<br />sudo rm ruby_ppc<br />sudo mv ruby_fat ruby<br /></pre><br /><br />Then, you should also remove the 2 management scripts:<br /><br /><pre><br />sudo rm /usr/bin/ppc_ruby.sh<br />sudo rm /usr/bin/fat_ruby.sh<br /></pre><br /><br />And that’s enough for the cleanup.</p>
		</div>
		<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/emphasizedinsanity/embed.js"></script><noscript><a href="http://emphasizedinsanity.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
	</div>
</div>
    <div class="push"></div>
    </div>

    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
          </div>
					<div class="company">
						<script type="text/javascript" src="http://s51.sitemeter.com/js/counter.js?site=s51eizesusrulez"></script>
						<a href="http://feeds.feedburner.com/EladOnRails"><img src="http://feeds.feedburner.com/~fc/EladOnRails?bg=FFFFFF&amp;fg=660033&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a>
					</div>
        </div>
				
        <div class="sponsor">
          <div>
        	</div>
      	</div>
    </div>
    
    
      <div id="facebox" style="display: none;">       <div class="popup">
         <table>           <tbody>             <tr>               <td 
class="tl"></td><td class="b"></td><td class="tr"></td>             </tr>
             <tr>               <td class="b"></td>               <td 
class="body">                 <div class="content">                 </div>
                 <div class="footer">                   <a href="#" 
class="close">                     <img src="index_files/closelabel.gif"
 title="close" class="close_image">                   </a>              
   </div>               </td>               <td class="b"></td>         
    </tr>             <tr>               <td class="bl"></td><td 
class="b"></td><td class="br"></td>             </tr>           </tbody>
         </table>       </div>     </div></body></html>